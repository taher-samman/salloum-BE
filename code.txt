// public function getValidateFeedback($code)
    // {
    //     try {
    //         $data = json_decode(Crypt::decryptString($code));
    //         $application = Application::where(['id' => $data->id, 'dr_email' => $data->email])->firstOrFail();
    //         if (!empty($application) && is_null($application->dr_feedback)) {
    //             return response()->json([
    //                 'status' => 'OK'
    //             ], 200);
    //         } else {
    //             return response()->json([
    //                 'status' => 'FAILED',
    //                 'message' => 'Already has feedback'
    //             ], 403);
    //         }
    //     } catch (\Throwable $th) {
    //         \Log::info('[getValidateFeedback] Can\'t find app with data: ' . json_encode($data));
    //         return response()->json([
    //             'status' => 'FAILED',
    //             'message' => 'Can\'t find app'
    //         ], 403);
    //     }
    // }

    // public function getImageDownloadLink($filePath)
    // {
    //     try {
    //         // Initialize Google Client
    //         $client = new Google_Client();
    //         $client->setAuthConfig(public_path('client_secret.json')); // Path to your client secret JSON file
    //         $client->addScope(Google_Service_Drive::DRIVE);
    //         $client->setAccessType('offline'); // or 'online' if you want to refresh token automatically

    //         // Fetch access token (assuming you already have it)
    //         $accessToken = 'ya29.a0Ad52N3-yQ32tSvxXVrObhWHP_XyiQtYaBJnnhyY6gMtfzHHNbwrwzf113vFZPKtG0Qm5vk4jmEaPQbqCsJyasSRnBVBap4BBmkyIihiHhRy9opRm_vhEJcClOx1wXjhTiU4DjnQuopLmwcnentPSIdPxZXOQrh78Yl0baCgYKAWESARESFQHGX2MihHAjhvlIUNJTSqpEirdbpA0171';
    //         $client->setAccessToken($accessToken);

    //         // Initialize Google Drive service
    //         $service = new Google_Service_Drive($client);

    //         // Search for the file based on the path
    //         $fileId = $this->getFileIdByPath($service, $filePath);

    //         if (!$fileId) {
    //             return response()->json(['error' => 'File not found'], 404);
    //         }

    //         // Retrieve metadata for the image file
    //         $file = $service->files->get($fileId);

    //         // Generate download link
    //         $downloadLink = $file->getWebContentLink();

    //         return response()->json(['download_link' => $downloadLink]);
    //     } catch (\Google\Service\Exception $e) {
    //         // Handle Google API exceptions
    //         return response()->json(['error' => $e->getMessage()], 500);
    //     } catch (\Exception $e) {
    //         // Handle other exceptions
    //         return response()->json(['error' => $e->getMessage()], 500);
    //     }
    // }

    // private function getFileIdByPath($service, $filePath)
    // {
    //     // Implement your logic to search for the file by its path
    //     // This might involve listing files in specific folders recursively
    //     // and comparing the file path with the provided one
    //     // You may need to handle pagination if there are many files

    //     // Example: list all files and search for the file by its path
    //     $results = $service->files->listFiles();
    //     \Log::info('$results '.json_encode($results));
    //     foreach ($results->getFiles() as $file) {
    //         if ($file->getName() == $filePath) {
    //             return $file->getId();
    //         }
    //     }

    //     return null;
    // }